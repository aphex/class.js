(function(){var a=this,c=a._;!c&&"undefined"!==typeof require&&(c=require("underscore"));var d=a.Class,b;b="undefined"!==typeof exports?exports:a.Class={};b.VERSION="0.5.0";b.root=a;b.noConflict=function(){a.Class=d;return this};var h=function(){};c.extend(b,{definition:[],define:function(a,d){c.isFunction(a)||(d=a,a=null);b.onBeforeClassDefine&&b.onBeforeClassDefine(a,d);var l=null;d&&d.hasOwnProperty("constructor")&&(l=d.constructor,delete d.constructor);var i=function(){if(!(this instanceof i))throw Error("Use new keyword to create a new instance or call/apply class with right scope");
b.onBeforeInstantiation&&b.onBeforeInstantiation(this);l?l.apply(this,arguments):a&&a.apply(this,arguments);b.onAfterInstantiation&&b.onAfterInstantiation(this)};a&&(h.prototype=a.prototype,i.prototype=new h,i.constructor=i,i.prototype.__super__=a.prototype);if(d&&(c.each(this.definition,function(a){if(typeof d[a]!=="undefined"){this[a].call(this,i,d[a]);delete d[a]}},this),0!=c.keys(d).length))throw Error("Unknown key in definition: "+key+". Allowed keys are: "+this.definition.join(", "));i.extend=
this._extend;b.onAfterClassDefine&&b.onAfterClassDefine(i);return i},_extend:function(a){return b.define(this,a)}})}).call(this);(function(a){var c=a.root._;a.definition.push("namespace");a.namespace=function(a,b){if(c.isString(a))var h=b,b=a,a=h;var b=b.split("."),k=this.root;0<b.length&&(h=b.pop(),c.each(b,function(a){k=k[a]=k[a]||{}}),k[h]=a);return a}})(Class);
(function(a){a.definition.push("singleton");a.singleton=function(a,d){d&&(a.$$instance=null,a.getInstance=function(){return this.$$instance||(this.$$instance=new this)})}})(Class);(function(a){var c=a.root._;a.definition.push("mixins");a.mixins=function(a,b){c.each(b,function(b){b=c.isFunction(b)?b.prototype:b;c.extend(a.prototype,b)})}})(Class);(function(a){var c=a.root._;a.definition.push("statics");a.statics=function(a,b){c.extend(a,b)}})(Class);
(function(a){var c=a.root._;a.error=a.error||function(a){throw a;};a.ECMA5=!1;a.types={String:c.isString,Number:c.isNumber,Boolean:c.isBoolean,Array:c.isArray,Function:c.isFunction,Object:c.isObject,Element:c.isElement,Regex:c.isRegExp};a.definition.push("properties");a.properties=function(o,p){for(var n in p){var f=o,g=n,e=p[n];c.isObject(e)||(e={type:e});var f=f.prototype,j=b(g,e,"set"),m=b(g,e,"get");a.ECMA5?(f.__defineSetter__(g,k(g,e,m,j)),f.__defineGetter__(g,h(g,e,m,j))):(f[j]=k(g,e,m,j),f[m]=
h(g,e,m,j));if("Boolean"===e.type){var i=b(g,e,"is");f[i]=q(g,e,m,j)}}n=o.prototype;n.set=d("set");n._set=d("_set")};var d=function(a){return function(b,d){if(c.isString(b)){var f=b,b={};b[f]=d}for(f in b){var g=f.charAt(0).toUpperCase()+f.substring(1),g=a+g;if(this[g])this[g](b[f]);else throw Error('No public set method for property "'+f+'" found.');}return this}},b=function(a,b,c){a=a.charAt(0).toUpperCase()+a.substring(1);a=c+a;if(!1===b["is"===c?"get":c])a="_"+a;return a},h=function(b,c,d,f){return function(){this.$$properties=
this.$$properties||{};if("undefined"!==typeof c.init){var d=c.init;delete c.init;if(a.ECMA5)this[b]=d;else this[f](d)}return this.$$properties[b]}},k=function(b,d,h){return function(f){var g;g=a.ECMA5?this[b]:this[h]();if(d.format){var e=c.isString(d.format)?this[d.format]:d.format;if(e)f=e.call(this,f,g,b);else throw Error('Format method "'+d.format+'" for property "'+b+'" not available.');}e=d.type;if(!(c.isNull(f)&&!0===d.nullable)&&e){var j=c.isFunction(e)?i:a.types[e];if(j){if(!j.call(this,f)){j=
'Wrong type for property "'+b+'". Expected value "'+f+'" to be of type "'+e+'" but found: '+typeof f;j+=". Allowed keys are: "+c.keys(a.types).join(", ");a.error(new a.TypeError(j,b,f,e));return}}else throw Error('Unknown type "'+e+'" for property "'+b+'".');}if(e=d.validate)c.isArray(e)||(e=[e]),c.each(e,function(e){if(e=c.isString(e)?this[e]:e){var e=e.call(this,f,g,b),h=c.isString(e);if(!e||h)a.error(new a.ValidationError(h?e:'Validation for property "'+b+'" with value "'+f+'" failed',b,f))}else throw Error('Validation method "'+
d.validate+'" for property "'+b+'" not available.');},this);this.$$properties[b]=f;if(d.hasOwnProperty("apply"))if(e=c.isString(d.apply)?this[d.apply]:d.apply)e.call(this,f,g,b);else throw Error('Apply method "'+d.apply+'" for property "'+b+'" not available.');if(d.event)if(e=this.trigger||this.emit)e.call(this,d.event,{target:this,value:f,old:g,property:b});else throw Error("Object does not support events");return f}},q=function(a,b,c){return function(){return this[c]()}},l=a.ValidationError=a.define(Error,
{constructor:function(a,b,c){this.name="ValidationError";this.message=a||"Validation Error";this.property=b;this.value=c}});a.TypeError=l.extend({constructor:function(a,b,c,d){l.apply(this,arguments);this.name="TypeError";this.message=a||"Type Error";this.type=d}});var i=function(a){return this instanceof a}})(Class);(function(a){var c=a.root._;a.definition.push("members");a.members=function(a,b){c.extend(a.prototype,b)}})(Class);
(function(a){var c=a.root._;a.definition.push("interfaces");a.interfaces=function(a,b){c.each(b,function(b){var b=c.isFunction(b)?b.prototype:b,k;for(k in b)if(b=a.prototype[k],"undefined"===typeof b||!c.isFunction(b))throw Error('The Class does not implement the interface method "'+b+'"');})}})(Class);