(function(){var c=this,a=c._;!a&&"undefined"!==typeof require&&(a=require("underscore"));var g=c.Class,b;b="undefined"!==typeof exports?exports:c.Class={};b.VERSION="0.2.1-pre";b.root=c;b.noConflict=function(){c.Class=g;return this};var h=function(){};a.extend(b,{definition:{},types:{String:a.isString,Number:a.isNumber,Boolean:a.isBoolean,Array:a.isArray,Function:a.isFunction,Object:a.isObject,Element:a.isElement,Regex:a.isRegExp},_extend:function(a){return b.define(this,a)},define:function(c,g){a.isFunction(c)||
(g=c,c=null);var l=g&&g.hasOwnProperty("constructor")?g.constructor:null,j=function(){if(!(this instanceof j))throw Error("Use new keyword to create a new instance or call/apply class with right scope");l?l.apply(this,arguments):c&&c.apply(this,arguments)};c&&(h.prototype=c.prototype,j.prototype=new h,j.constructor=j,j.prototype.__super__=c.prototype);j.prototype.$$error=b.error;for(var d in g)if("undefined"!==typeof this.definition[d])this.definition[d].call(this,j,g[d]);else throw Error("Unknown key in definition: "+
d+". Allowed keys are: "+a.keys(this.definition).join(", "));j.extend=this._extend;j.prototype.instanceOf=this._instanceOf;return j},error:function(a){throw a;},_forProto:function(c,g,b,j){a.each(g,function(d){d=a.isFunction(d)?d.prototype:d;b.call(j,d)})},_instanceOf:function(a){return this instanceof a}})}).call(this);
(function(){var c=this._,a=this.Class;a.definition.namespace=a.namespace=function(a,b){if(c.isString(a))var h=b,b=a,a=h;b=b.split(".");h=this.root;if(0<b.length){for(var o=b.pop(),m=0,l=b.length;m<l;m++)var j=b[m],h=h[j]=h[j]||{};h[o]=a}return a}}).call(this);(function(){var c=this.Class;c.definition.singleton=c.singleton=function(a,c){c&&(a.$$instance=null,a.getInstance=function(){return this.$$instance||(this.$$instance=new this)})}}).call(this);
(function(){var c=this._,a=this.Class;a.definition.mixins=a.mixins=function(a,b){this._forProto(a,b,function(b){c.extend(a.prototype,b)})}}).call(this);(function(){var c=this.Class;c.definition.interfaces=c.interfaces=function(a,c){this._forProto(a,c,function(c){for(var g in c)if(!a.prototype[g])throw Error('The Class does not implement the interface member "'+g+'"');})}}).call(this);(function(){var c=this._,a=this.Class;a.definition.members=a.members=function(a,b){c.extend(a.prototype,b)}}).call(this);
(function(){var c=this._,a=this.Class;a.definition.statics=a.statics=function(a,b){c.extend(a,b)}}).call(this);
(function(){var c=this._,a=this.Class;a.definition.properties=a.properties=function(a,d){for(var p in d){var f=a,i=p,k=d[p];c.isObject(k)||(k={type:k});var e=b(i,k,"set"),n=b(i,k,"get");f.prototype[e]=o(i,k,n,e);f.prototype[n]=h(i,k,n,e);if("Boolean"===k.type){var q=b(i,k,"is");f.prototype[q]=m(i,k,n,e)}}a.prototype.set=g("set");a.prototype._set=g("_set")};var g=function(a){return function(d,b,f){if(c.isString(d)){var i=d,d={};d[i]=b}else f=f||b;for(i in d)if(b=i.charAt(0).toUpperCase()+i.substring(1),
b=a+b,this[b])this[b](d[i],f);else throw Error('No public set method for property "'+i+'" found.');return this}},b=function(a,c,b){a=a.charAt(0).toUpperCase()+a.substring(1);name=b+a;if(!1===c["is"===b?"get":b])name="_"+name;return name},h=function(a,c,b,f){return function(){this.$$properties=this.$$properties||{};if("undefined"!==typeof c.init){var b=c.init;delete c.init;this[f](b)}return this.$$properties[a]}},o=function(b,d,g){return function(f,i){var i=!1===i?!1:!0,k=this[g]();if(d.format){var e=
c.isString(d.format)?this[d.format]:d.format;if(e)f=e.call(this,f,k,b);else throw Error('Format method "'+d.format+'" for property "'+b+'" not available.');}e=d.type;if(!(c.isNull(f)&&!0===d.nullable)&&e){var h=c.isFunction(e)?this.instanceOf:a.types[e];if(h){if(!h.call(this,f)){h='Wrong type for property "'+b+'". Expected value "'+f+'" to be of type "'+e+'" but found: '+typeof f;h+=". Allowed keys are: "+c.keys(a.types).join(", ");e=new a.TypeError(h,b,f,e);this.$$error.call(this,e);return}}else throw Error('Unknown type "'+
e+'" for property "'+b+'".');}if(e=d.validate)c.isArray(e)||(e=[e]),c.each(e,function(e){if(e=c.isString(e)?this[e]:e){var e=e.call(this,f,k,b),g=c.isString(e);if(!e||g)this.$$error.call(this,new a.ValidationError(g?e:'Validation for property "'+b+'" with value "'+f+'" failed',b,f))}else throw Error('Validation method "'+d.validate+'" for property "'+b+'" not available.');},this);this.$$properties[b]=f;if(d.hasOwnProperty("apply"))if(e=c.isString(d.apply)?this[d.apply]:d.apply)e.call(this,f,k,b);
else throw Error('Apply method "'+d.apply+'" for property "'+b+'" not available.');if(d.event&&i)if(e=this.trigger||this.emit)e.call(this,d.event,{target:this,value:f,old:k,property:b});else throw Error("Object does not support events");return f}},m=function(a,b,c){return function(){return this[c]()}},l=a.ValidationError=a.define(Error,{constructor:function(a,b,c){this.name="ValidationError";this.message=a||"Validation Error";this.property=b;this.value=c}});a.TypeError=l.extend({constructor:function(a,
b,c,f){l.apply(this,arguments);this.name="TypeError";this.message=a||"Type Error";this.type=f}})}).call(this);