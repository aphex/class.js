/*! class.js v0.7.1 https://github.com/tjbutz/class.js | License: https://github.com/tjbutz/class.js/blob/master/LICENSE */
(function(){"use strict";var e=this,t=e._;!t&&typeof require!="undefined"&&(e._=t=require("underscore"));var n=e.Class,r;typeof exports!="undefined"?r=exports:r=e.Class={},r.VERSION="0.7.0",r.root=e,r.noConflict=function(){return e.Class=n,this};var i=function(){};t.extend(r,{definition:[],define:function(e,n){t.isFunction(e)||(n=e,e=null),r.onBeforeClassDefine&&r.onBeforeClassDefine(e,n);var s=null;n&&n.hasOwnProperty("constructor")&&(s=n.constructor,delete n.constructor);var o=function(){if(!(this instanceof o))throw new Error("Use new keyword to create a new instance or call/apply class with right scope");r.onBeforeInstantiation&&r.onBeforeInstantiation(this);var t=this.__super__;this.__super__=e,s?s.apply(this,arguments):e&&e.apply(this,arguments),this.__super__=t,r.onAfterInstantiation&&r.onAfterInstantiation(this)};e&&(i.prototype=e.prototype,o.prototype=new i,o.prototype.constructor=o,o.prototype.__super__=e.prototype);if(n){t.each(this.definition,function(e){t.isUndefined(n[e])||(this[e].call(this,o,n[e]),delete n[e])},this);if(t.keys(n).length!==0)throw new Error("Unknown key in definition: "+t.keys(n).join(", ")+". Allowed keys are: "+this.definition.join(", "))}if(e){var u=o.prototype;for(var a in u){var f=u[a],l=e.prototype[a];t.isFunction(f)&&t.isFunction(l)&&(u[a]=function(t,n){return function(){var t=this.__super__;this.__super__=e.prototype;var r=n.apply(this,arguments);return this.__super__=t,r}}(a,f))}}return o.extend=this._extend,r.onAfterClassDefine&&r.onAfterClassDefine(o),o},_extend:function(e){return r.define(this,e)}})}).call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("namespace"),e.namespace=function(e,n){if(t.isString(e)){var r=n;n=e,e=r}n=n.split(".");var i=this.root;if(n.length>0){var s=n.pop();t.each(n,function(e){i=i[e]=i[e]||{}}),i[s]=e}return e}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("singleton"),e.singleton=function(e,t){t&&(e.$$instance=null,e.getInstance=function(){return this.$$instance||(this.$$instance=new this)})}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("statics"),e.statics=function(e,n){t.extend(e,n)}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.ECMA5=!1,e.types={String:t.isString,Number:t.isNumber,Boolean:t.isBoolean,Array:t.isArray,Function:t.isFunction,Object:t.isObject,Element:t.isElement,Date:t.isDate,Regex:t.isRegExp},e.definition.push("properties"),e.properties=function(e,t){for(var i in t)r(e,i,t[i]);var s=e.prototype;s.set=n(""),s._set=n("_")};var n=function(e){return function(n,r){if(t.isString(n)){var s=n;n={},n[s]=r}for(var s in n){var o=i("set",s,e);if(!!t.isUndefined(this[o]))throw new Error('No public set method for property "'+s+'" found.');u(this,o,n[s])}return this}},r=function(n,r,u){t.isObject(u)||(u={type:u});var a=i("set",r,s("set",u)),l=i("get",r,s("get",u)),h=n.prototype;e.ECMA5?(h.__defineSetter__(a,f(r,u,l,a)),h.__defineGetter__(l,o(r,u,l,a))):(h[a]=f(r,u,l,a),h[l]=o(r,u,l,a));if(u.type==="Boolean"){var p=i("is",r,s(u,"is"));h[p]=c(l)}},i=function(t,n,r){return!e.ECMA5||t==="is"?r+t+v(n):r+n},s=function(e,t){return t[e==="is"?"get":e]===!1?"_":""},o=function(e,n,r,i){return function(){this.$$properties=this.$$properties||{};if(!t.isUndefined(n.init)){var r=n.init;delete n.init,u(this,i,r)}return this.$$properties[e]}},u=function(t,n,r){e.ECMA5?t[n]=r:t[n](r)},a=function(t,n){return e.ECMA5?t[n]:t[n]()},f=function(n,r,i,s){return function(s){var o=a(this,i);if(r.format){var u=l(this,r.format);if(!u)throw new Error('Format method "'+r.format+'" for property "'+n+'" not available.');s=u.call(this,s,o,n)}if(o===s)return;var f=r.type,c=t.isNull(s)&&r.nullable===!0;if(!c&&f){var h=t.isFunction(f)?d:e.types[f];if(!h)throw new Error('Unknown type "'+f+'" for property "'+n+'".');if(!h.call(this,s)){var p='Wrong type for property "'+n+'". Expected value "'+s+'" to be of type "'+f+'" but found: '+typeof s;throw p+=". Allowed keys are: "+t.keys(e.types).join(", "),new e.TypeError(p,n,s,f)}}var v=r.validate;v&&(t.isArray(v)||(v=[v]),t.each(v,function(i){i=l(this,i);if(!i)throw new Error('Validation method "'+r.validate+'" for property "'+n+'" not available.');var u=i.call(this,s,o,n),a=t.isString(u);if(!u||a){var f=a?u:'Validation for property "'+n+'" with value "'+s+'" failed';throw new e.ValidationError(f,n,s)}},this)),this.$$properties[n]=s;if(r.hasOwnProperty("apply")){var m=l(this,r.apply);if(!m)throw new Error('Apply method "'+r.apply+'" for property "'+n+'" not available.');m.call(this,s,o,n)}if(r.event){var g=this.trigger||this.emit;if(!g)throw new Error("Object does not support events");g.call(this,r.event,{target:this,value:s,old:o,property:n})}return s}},l=function(e,n){return t.isString(n)?e[n]:n},c=function(e){return function(){return a(this,e)}},h=e.ValidationError=e.define(Error,{constructor:function(e,t,n){this.name="ValidationError",this.message=e||"Validation Error",this.property=t,this.value=n}}),p=e.TypeError=h.extend({constructor:function(e,t,n,r){h.apply(this,arguments),this.name="TypeError",this.message=e||"Type Error",this.type=r}}),d=function(e){return this instanceof e},v=function(e){return e.charAt(0).toUpperCase()+e.substring(1)}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("mixins"),e.mixins=function(e,n){t.each(n,function(n){var n=t.isFunction(n)?n.prototype:n;t.extend(e.prototype,n)})}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("members"),e.members=function(e,n){t.extend(e.prototype,n)}}.call(this),function(){"use strict";var e=this.Class||exports,t=this._;e.definition.push("interfaces"),e.interfaces=function(e,r){t.each(r,function(r){var r=t.isFunction(r)?r.prototype:r;for(var i in r){var s=e.prototype[i];if(t.isUndefined(s)||!t.isFunction(s))throw new Error('The Class does not implement the interface method "'+s+'"');t.isFunction(r[i])&&(e.prototype[i]=n(r[i],s))}})};var n=function(e,t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}}.call(this);