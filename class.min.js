(function(){var j=this,c=j._;!c&&"undefined"!==typeof require&&(c=require("underscore"));var n=j.Class,i;i="undefined"!==typeof exports?exports:j.Class={};i.VERSION="0.1";i.noConflict=function(){j.Class=n;return this};var m=function(){};return i={types:{String:c.isString,Number:c.isNumber,Boolean:c.isBoolean,Array:c.isArray,Function:c.isFunction,Object:c.isObject,Element:c.isElement,Regex:c.isRegExp},_extend:function(c){return i.define(this,c)},define:function(g,d){c.isFunction(g)||(d=g,g=null);var b=
d&&d.hasOwnProperty("constructor")?d.constructor:null,a=function(){if(!(this instanceof a))throw Error("Use new keyword to create a new instance");b?b.apply(this,arguments):g&&g.apply(this,arguments)};g&&(m.prototype=g.prototype,a.prototype=new m,a.constructor=a,a.prototype.__super__=g.prototype);if(d){d.singleton&&(a.$$instance=null,a.getInstance=function(){return this.$$instance||(this.$$instance=new this)});var h=d.mixins;if(h)for(var e=0,l=h.length;e<l;e++){var o=c.isFunction(h[e])?h[e].prototype:
h[e];c.extend(a.prototype,o)}if(e=d.properties)for(var k in e)i._createProperty(a,k,e[k]);a.prototype.set=function(b){for(var a in b){var c="set"+(a.charAt(0).toUpperCase()+a.substring(1));if(this[c])this[c](b[a]);else throw Error('No public set method for property "'+a+'" found.');}return this};c.extend(a.prototype,d.members);c.extend(a,d.statics);if(k=d.interfaces){e=0;for(l=k.length;e<l;e++){var h=c.isFunction(k[e])?k[e].prototype:k[e],f;for(f in h)if(!a.prototype[f])throw Error('The Class does not implement the interface member "'+
f+'"');}}}a.extend=i._extend;a.prototype.instanceOf=i._instanceOf;return a},_instanceOf:function(c){return this instanceof c},_createProperty:function(g,d,b){var a=d.charAt(0).toUpperCase()+d.substring(1),h="get"+a;!1===b.get&&(h="_"+h);var e="set"+a;!1===b.set&&(e="_"+e);g.prototype[e]=function(a,e){var e=!0===e?!0:!1,g=this[h]();if(b.format){var f=c.isString(b.format)?this[b.format]:b.format;if(f)a=f.call(this,a,g);else throw Error('Format method "'+b.format+'" for property "'+d+'" not available.');
}f=b.type;if(!(c.isNull(a)&&!0===b.nullable)&&f){var j=c.isFunction(f)?this.instanceOf:i.types[f];if(j){if(!j.call(this,a))throw Error('Wrong type for property "'+d+'". Expected value "'+a+'" to be of type "'+f+'" but found: '+typeof a);}else throw Error('Unknown type "'+f+'" for property "'+d+'".');}if(b.validate)if(f=c.isString(b.validate)?this[b.validate]:b.validate){if(!f.call(this,a,g))throw Error('Validation for property "'+d+'" with value "'+a+'" failed');}else throw Error('Validation method "'+
b.validate+'" for property "'+d+'" not available.');this.$$properties[d]=a;if(b.apply)if(f=c.isString(b.apply)?this[b.apply]:b.apply)f.call(this,a,g);else throw Error('Apply method "'+b.apply+'" for property "'+d+'" not available.');if(b.event&&e)if(f=this.trigger||this.emit)f.call(this,b.event,{target:this,value:a,old:g});else throw Error("Object does not support events");return a};g.prototype[h]=function(){this.$$properties=this.$$properties||{};"undefined"!==typeof b.init&&(this.$$properties[d]=
b.init,delete b.init);return this.$$properties[d]};"Boolean"===b.type&&(a="is"+a,!1===b.get&&(a="_"+a),g.prototype[a]=function(){return this[h]()})}}}).call(this);