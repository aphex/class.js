(function(){var a=this,c=a._;!c&&"undefined"!==typeof require&&(c=require("underscore"));var d=a.Class,b;b="undefined"!==typeof exports?exports:a.Class={};b.VERSION="0.4";b.root=a;b.noConflict=function(){a.Class=d;return this};var k=function(){};c.extend(b,{definition:[],define:function(a,d){c.isFunction(a)||(d=a,a=null);b.onBeforeClassDefine&&b.onBeforeClassDefine(a,d);var l=null;d&&d.hasOwnProperty("constructor")&&(l=d.constructor,delete d.constructor);var i=function(){if(!(this instanceof i))throw Error("Use new keyword to create a new instance or call/apply class with right scope");
b.onBeforeInstantiation&&b.onBeforeInstantiation(this);l?l.apply(this,arguments):a&&a.apply(this,arguments);b.onAfterInstantiation&&b.onAfterInstantiation(this)};a&&(k.prototype=a.prototype,i.prototype=new k,i.constructor=i,i.prototype.__super__=a.prototype);if(d&&(c.each(this.definition,function(a){if(typeof d[a]!=="undefined"){this[a].call(this,i,d[a]);delete d[a]}},this),0!=c.keys(d).length))throw Error("Unknown key in definition: "+key+". Allowed keys are: "+this.definition.join(", "));i.extend=
this._extend;b.onAfterClassDefine&&b.onAfterClassDefine(i);return i},_extend:function(a){return b.define(this,a)}})}).call(this);(function(a){var c=a.root._;a.definition.push("namespace");a.namespace=function(a,b){if(c.isString(a))var k=b,b=a,a=k;var b=b.split("."),h=this.root;0<b.length&&(k=b.pop(),c.each(b,function(a){h=h[a]=h[a]||{}}),h[k]=a);return a}})(Class);
(function(a){a.definition.push("singleton");a.singleton=function(a,d){d&&(a.$$instance=null,a.getInstance=function(){return this.$$instance||(this.$$instance=new this)})}})(Class);(function(a){var c=a.root._;a.definition.push("mixins");a.mixins=function(a,b){c.each(b,function(b){b=c.isFunction(b)?b.prototype:b;c.extend(a.prototype,b)})}})(Class);(function(a){var c=a.root._;a.definition.push("statics");a.statics=function(a,b){c.extend(a,b)}})(Class);
(function(a){var c=a.root._;a.error=a.error||function(a){throw a;};a.types={String:c.isString,Number:c.isNumber,Boolean:c.isBoolean,Array:c.isArray,Function:c.isFunction,Object:c.isObject,Element:c.isElement,Regex:c.isRegExp};a.definition.push("properties");a.properties=function(a,m){for(var n in m){var f=a,g=n,j=m[n];c.isObject(j)||(j={type:j});var e=b(g,j,"set"),i=b(g,j,"get");f.prototype[e]=h(g,j,i,e);f.prototype[i]=k(g,j,i,e);if("Boolean"===j.type){var p=b(g,j,"is");f.prototype[p]=o(g,j,i,e)}}a.prototype.set=
d("set");a.prototype._set=d("_set")};var d=function(a){return function(b,d,f){if(c.isString(b)){var g=b,b={};b[g]=d}else f=f||d;for(g in b)if(d=g.charAt(0).toUpperCase()+g.substring(1),d=a+d,this[d])this[d](b[g],f);else throw Error('No public set method for property "'+g+'" found.');return this}},b=function(a,b,c){a=a.charAt(0).toUpperCase()+a.substring(1);a=c+a;if(!1===b["is"===c?"get":c])a="_"+a;return a},k=function(a,b,c,d){return function(){this.$$properties=this.$$properties||{};if("undefined"!==
typeof b.init){var c=b.init;delete b.init;this[d](c)}return this.$$properties[a]}},h=function(b,d,k){return function(f,g){var g=!1===g?!1:!0,j=this[k]();if(d.format){var e=c.isString(d.format)?this[d.format]:d.format;if(e)f=e.call(this,f,j,b);else throw Error('Format method "'+d.format+'" for property "'+b+'" not available.');}e=d.type;if(!(c.isNull(f)&&!0===d.nullable)&&e){var h=c.isFunction(e)?i:a.types[e];if(h){if(!h.call(this,f)){h='Wrong type for property "'+b+'". Expected value "'+f+'" to be of type "'+
e+'" but found: '+typeof f;h+=". Allowed keys are: "+c.keys(a.types).join(", ");e=new a.TypeError(h,b,f,e);a.error.call(this,e);return}}else throw Error('Unknown type "'+e+'" for property "'+b+'".');}if(e=d.validate)c.isArray(e)||(e=[e]),c.each(e,function(e){if(e=c.isString(e)?this[e]:e){var e=e.call(this,f,j,b),k=c.isString(e);if(!e||k)a.error.call(this,new a.ValidationError(k?e:'Validation for property "'+b+'" with value "'+f+'" failed',b,f))}else throw Error('Validation method "'+d.validate+'" for property "'+
b+'" not available.');},this);this.$$properties[b]=f;if(d.hasOwnProperty("apply"))if(e=c.isString(d.apply)?this[d.apply]:d.apply)e.call(this,f,j,b);else throw Error('Apply method "'+d.apply+'" for property "'+b+'" not available.');if(d.event&&g)if(e=this.trigger||this.emit)e.call(this,d.event,{target:this,value:f,old:j,property:b});else throw Error("Object does not support events");return f}},o=function(a,b,d){return function(){return this[d]()}},l=a.ValidationError=a.define(Error,{constructor:function(a,
b,d){this.name="ValidationError";this.message=a||"Validation Error";this.property=b;this.value=d}});a.TypeError=l.extend({constructor:function(a,b,d,c){l.apply(this,arguments);this.name="TypeError";this.message=a||"Type Error";this.type=c}});var i=function(a){return this instanceof a}})(Class);(function(a){var c=a.root._;a.definition.push("members");a.members=function(a,b){c.extend(a.prototype,b)}})(Class);
(function(a){var c=a.root._;a.definition.push("interfaces");a.interfaces=function(a,b){c.each(b,function(b){var b=c.isFunction(b)?b.prototype:b,h;for(h in b)if(b=a.prototype[h],"undefined"===typeof b||!c.isFunction(b))throw Error('The Class does not implement the interface method "'+b+'"');})}})(Class);